swagger: "2.0"
info:
  version: "0.0.1"
  title: Target Shooting Database
host: localhost:10010
basePath: /
schemes:
  - http
  - https
consumes:
  - application/json
  - application/octet-stream
produces:
  - application/json
paths:
  /shooter:
    x-swagger-router-controller: shooter
    get:
      description: Returns all shooters of the system
      operationId: getShooters
      responses:
        "200":
          description: Success
          schema:
            type: array
            items:
              $ref: "#/definitions/Shooter"
        default:
          description: Error
          schema:
            $ref: "#/definitions/Answer"
    post:
      operationId: postShooterByName
      summary: Adds a shooter
      description: Adds one shooter by his first and lastname.
      parameters:
        - name: firstname
          in: query
          type: string
          description: Firstname of the shooter
          required: true
        - name: lastname
          in: query
          description: Lastname of the shooter
          type: string
          required: true
      responses:
        200:
          description: The ID of the saved shooter
          schema:
            $ref: "#/definitions/Answer"
        default:
          description: Error
          schema:
            $ref: "#/definitions/Answer"
  /shooter/{id}:
    x-swagger-router-controller: shooter
    get:
      description: Returns the shooter with the specified ID
      operationId: getShooterById
      parameters:
        - name: id
          in: path
          description: The ID of the shooter
          required: true
          type: string
      responses:
        "200":
          description: Success
          schema:
            $ref: "#/definitions/Shooter"
        "404":
          description: Not found
          schema:
            $ref: "#/definitions/Answer"
        default:
          description: Error
          schema:
            $ref: "#/definitions/Answer"
  /event:
    x-swagger-router-controller: event
    get:
      operationId: getEvents
      summary: Returns all events of the system
      description: |
        An event links shooters and their results together.
        For example, an event may be a World Championship where many shooters
        shoot many results (each of them shooting one result).
        An event may also be a personal training where one shooter
        scores exactly one result.
      responses:
        "200":
          description: Success
          schema:
            type: array
            items:
              $ref: "#/definitions/Event"
        default:
          description: Error
          schema:
            $ref: "#/definitions/Answer"
  /event/{id}:
    x-swagger-router-controller: event
    get:
      operationId: getEventById
      description: Returns the event for the specified ID
      parameters:
        - name: id
          in: path
          description: The ID of the event
          required: true
          type: string
      responses:
        "200":
          description: Success
          schema:
            $ref: "#/definitions/Event"
        default:
          description: Error
          schema:
            $ref: "#/definitions/Answer"
  /event/{id}/participation:
    x-swagger-router-controller: event
    post:
      operationId: postParticipation
      description: Adds a participation to the event
      parameters:
        - name: id
          in: path
          description: The ID of the event
          required: true
          type: string
        - name: shooterId
          in: query
          description: The ID of the participating shooter
          required: true
          type: string
        - name: resultId
          in: query
          type: string
          description: The ID of the result which the participating shooter has shot
          required: true
      responses:
        "200":
          description: Success
          schema:
            $ref: "#/definitions/Answer"
        default:
          description: Error
          schema:
            $ref: "#/definitions/Answer"
  /result:
    x-swagger-router-controller: result
    post:
      operationId: postResult
      summary: Adds a result to the database
      parameters:
        - name: result
          in: body
          schema: 
            $ref: "#/definitions/Result"
          description: The whole result
          required: true
      responses:
        200:
          description: The id of the saved result
          schema:
            $ref: "#/definitions/Answer"
        default:
          description: Error
          schema:
            $ref: "#/definitions/Answer"
definitions:
  Shooter:
    required:
      - firstname
      - lastname
    properties:
      firstname:
        type: string
      lastname:
        type: string
  Result:
    required:
      - score
      - category
    properties:
      score:
        type: number
        format: float
      category:
        type: string
      children:
        type: array
        items:
          $ref: '#/definitions/Result'
  Event:
    required:
      - description
    properties:
      description:
        type: string
      participations:
        type: array
        items:
          $ref: '#/definitions/Participation'
  Participation:
    required:
      - shooter
      - result
    properties:
      shooter:
        type: string
      result:
        type: string
  Answer:
    required:
      - code
      - type
      - message
    properties:
      code: 
        type: number
      type:
        type: string
      message: 
        description: A more detailed message of what has been done
        type: string
      result:
        description: The affected record
        type: string
